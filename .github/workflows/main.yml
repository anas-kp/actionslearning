name: Input Files Build Deploy

on:
  workflow_dispatch:
    inputs:
      environment:
        description: environment
        required: true
        type: environment
      region:
        type: choice
        description: Select Region
        options:
          - "East US"
          - "West US"
        
env:
  PORT: 22

jobs:
  check:
    name: check
    runs-on: ubuntu-latest
    steps:
      - name: "Checkout GitHub Action"
        uses: actions/checkout@v2
      - name: print environment
        run: |
            echo ${{ github.event.inputs.environment }}
      - name: "create file"
        run: |
          touch text.txt
          echo "name">> text.txt
          sed -i 's/name/${{ secrets.name }}/g' text.txt
          sed -i 's/dev/hello/g' text.txt
      - name: "create file"
        run: |
          touch text.txt
          echo "name">> text.txt
          sed -i 's/name/${{ secrets.name }}/g' text.txt
          sed -i 's/dev/hello/g' text.txt
          getsubnetid=$(if [ '${{ github.event.inputs.region }}' == 'East US' ];then echo "${{ secrets.NETWORK_RG_NAME_EAST }}"; else echo "${{ secrets.NETWORK_RG_NAME_WEST }}"; fi)
          echo "${getsubnetid}"
          echo "${getsubnetid}">> text.txt
      - name: "tar"
        run: tar -cvf file.tar text.txt 
      - name: "upload"
        uses: actions/upload-artifact@v2
        with:
          name: startup-scripts
          path: "file.tar"
      - name: Download Startup Scripts Artifact
        uses: actions/download-artifact@v2
        with:
          name: startup-scripts
